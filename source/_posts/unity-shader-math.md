---
title: unity_shader_math
comments: true
tags:
  - unity
  - shader	
date: 2019-02-18 16:21:01
---

##### 坐标系

模型空间和世界空间使用的坐标系：左手坐标系。 右侧right 上侧up 前侧forward分别对应了x y z轴正方向。
观察空间里的坐标系：是右手坐标系。以摄像机为原点坐标系，摄像机前向是z轴负方向，与模型空间正好相反。

##### 点

点是n纬空间的一个位置，没有大小没有宽度 
$$
P = (P_x, P_y) \sqrt(56) \vec{a}\sum{a}\prod{x}\prod_{n=1}^{99}{x_n}\sin{x}
$$

##### 矢量Vector也叫向量

##### 标量    

##### 模

##### 方向

标量只有模没有方向，向量既有模又有方向
点是没有大小的一个位置，矢量是一个有模和方向的但没有位置的的量。
矢量描述的是位置偏移

##### 矢量的模

$$
|v| = \sqrt(v_x^2+v_y^2+v_z^2)
$$

$$
|(1,2,3)| = \sqrt(1^2 + 2^2 + 3^2)=\sqrt(1+4+9)=\sqrt(14)
$$



#####单位矢量

指的是模为1的矢量，也叫被归一化的矢量normalized vector，归一化过程normalization
$\vec(v)=v/|v|$,v是非零矢量

##### 矢量的点积

点积描述的是两个矢量的方向是否一致，$a·b=(a_x, a_y, a_z) · (b_x, b_y, b_z))=a_xb_x+a_yb_y+a_zb_z$
两个矢量的点积等于他们之间夹角的余弦值$\theta=arcos(\vec(a), \vec(b))$
夹角小于90度方向一致，夹角等于90度方向垂直，夹角大于90度方向相反

#####矢量的叉乘，外积

$a \times b=(a_x, a_y, a_z)\times(b_x, b_y, b_z) = (a_yb_z-a_zb_y,  a_xb_z-a_zb_x,  a_xb_y-a_yb_x)$

$|a \times b| = |a||b|sin\theta$

几何意义:计算垂直于一个平面、三角形的矢量，可用于判断三角面的朝向

##### 矩阵

$$
M = \begin{bmatrix}
m_{11} & m_{12} & m_{13}\\
m_{21} & m_{22} & m_{23}\\
m_{31} & m_{32} & m_{33}
\end{bmatrix} \tag{4}
$$



M_{ij}表示这个元素在矩阵M的第i行，第j列

##### 行矩阵 

只有一行的矩阵    $ \begin{bmatrix} 1 & 2 & 3 \end{bmatrix}​$

##### 列矩阵

只有一列的矩阵  $ \begin{bmatrix} 1 \\ 2 \\ 3 \end{bmatrix}$

##### 方块矩阵

行数和列数相等的矩阵

##### 对角矩阵

如果一个矩阵除了对角元素崴的所有元素都为0，那么这个矩阵就叫做对角矩阵

##### 单位矩阵

任何矩阵和它相乘的结果还是原来的矩阵 $MI=IM=M$, 那么这个矩阵就是单位矩阵跟标量中的1一个意思

##### 转置矩阵

原来矩阵的第i行变成新矩阵的第i列，而第j列变成新矩阵的第j行$M_{ij}^T = M_{ji}$

- 矩阵转置的转置等于原矩阵 $(M^T)^T=M$

- 矩阵串接的转置等于反向串接各个矩阵的转置$(AB)^T=B^TA^T$

##### 逆矩阵

如果一个方阵M，它的逆矩阵$M^{-1}$ 来表示，如果$MM^{-1}= M^{-1}M=I$
则说明这个矩阵是可逆的（invertible）是非奇异的（nonsingular），如果一个矩阵没有对应的逆矩阵，则说明他是不可逆的(noninvertible)或者是奇异的singular
如何判断一个矩阵是否是可逆的呢？简单的来说就是一个矩阵的行列式（determinant）不为0 
特性：

- 逆矩阵的逆矩阵是原矩阵本身

- 单位矩阵的逆矩阵是它本身

- 转置矩阵的逆矩阵是逆矩阵的转置${(M^T)}^{-1}=(M^{-1})^T)$

- 矩阵串接相乘后的逆矩阵等于反向串接各个矩阵的逆矩阵$(AB)^{-1}=B^{-1}A^{-1}$

几何意义是允许变换的反向变换

##### 正交矩阵

如果一个方阵M和它的转置矩阵$M^T$相乘的乘积为单位矩阵的话，那么说明这个矩阵是正交的(orthogonal)
$$
MM^T=M^TM=I
$$
 如果一个矩阵是正交的那么它的转置矩阵和逆矩阵是一样的也就是 $M^T=M^{-1}$

几何意义：在进行反向变换时候需要逆矩阵，而逆矩阵非常难求，所以如果是正交矩阵的话那么他的逆矩阵求解就非常简单了就是他的转置矩阵。

如何判断是否有正交矩阵呢：

- 矩阵的每一行是单位矢量，因为只有单位矢量与自己的点积才是1
- 矩阵的每一行c1 c2 c3互相垂直，因为只有这样他们之间互相点积才等于0









  





